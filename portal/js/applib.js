function addCrashLayers(){fatality_monthly_all_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/allFatalities_monthly/MapServer",{id:"fatality_monthly_all_Layer"}),AddLayer(fatality_monthly_all_Layer,!1),fatality_monthly_ped_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/pedFatalities_monthly/MapServer",{id:"fatality_monthly_ped_Layer"}),AddLayer(fatality_monthly_ped_Layer,!1),fatality_monthly_bike_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/bikeFatalities_monthly/MapServer",{id:"fatality_monthly_bike_Layer"}),AddLayer(fatality_monthly_bike_Layer,!1),fatality_monthly_motor_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/motorFatalities_monthly/MapServer",{id:"fatality_monthly_motor_Layer"}),AddLayer(fatality_monthly_motor_Layer,!1),fatality_yearly_all_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/allFatalities_yearly/MapServer",{id:"fatality_yearly_all_Layer"}),AddLayer(fatality_yearly_all_Layer,!1),fatality_yearly_ped_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/pedFatalities_yearly/MapServer",{id:"fatality_yearly_ped_Layer"}),AddLayer(fatality_yearly_ped_Layer,!1),fatality_yearly_bike_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/bikeFatalities_yearly/MapServer",{id:"fatality_yearly_bike_Layer"}),AddLayer(fatality_yearly_bike_Layer,!1),fatality_yearly_motor_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/motorFatalities_yearly/MapServer",{id:"fatality_yearly_motor_Layer"}),AddLayer(fatality_yearly_motor_Layer,!1),injury_monthly_all_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/all_monthly_Injuries_and_fatalities/MapServer",{id:"injury_monthly_all_Layer"}),AddLayer(injury_monthly_all_Layer,!1),injury_monthly_ped_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/pedFatalities_and_Injuries_monthly/MapServer",{id:"injury_monthly_ped_Layer"}),AddLayer(injury_monthly_ped_Layer,!1),injury_monthly_bike_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/bikeFatalities_and_Injuries_monthly/MapServer",{id:"injury_monthly_bike_Layer"}),AddLayer(injury_monthly_bike_Layer,!1),injury_monthly_motor_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/motorFatalities_and_Injuries_monthly/MapServer",{id:"injury_monthly_motor_Layer"}),AddLayer(injury_monthly_motor_Layer,!1),injury_yearly_all_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/allInjury_yearly/MapServer",{id:"injury_yearly_all_Layer",opacity:.8}),AddLayer(injury_yearly_all_Layer,!1),injury_yearly_ped_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/pedInjury_yearly/MapServer",{id:"injury_yearly_ped_Layer",opacity:.8}),AddLayer(injury_yearly_ped_Layer,!1),injury_yearly_bike_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/bikeInjury_yearly/MapServer",{id:"injury_yearly_bike_Layer",opacity:.8}),AddLayer(injury_yearly_bike_Layer,!1),injury_yearly_motor_Layer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/motorInjury_yearly/MapServer",{id:"injury_yearly_motor_Layer",opacity:.8}),AddLayer(injury_yearly_motor_Layer,!1)}function AddLayer(a,b){a.on("update-start",function(){showLoading()}),a.on("update-end",function(){hideLoading()}),a.setDisableClientCaching(!1),map.addLayer(a),a.setVisibility(b)}function checkInterventionBtns(a){if(hasClass("ASZBtn","active")){var b=3;a.push(b)}if(hasClass("SSFSBtn","active")){var b=5;a.push(b)}if(hasClass("slowZonesBtn","active")){var b=6;a.push(b)}if(hasClass("engineeringBtn","active")){var b=1,c=2;a.push(b,c)}if(hasClass("speedHumpsBtn","active")){var b=4;a.push(b)}if(hasClass("LPIBtn","active")){var b=0;a.push(b)}interventionLayer.setVisibleLayers(a),console.log(a)}function checkOutreachBtns(a){if(hasClass("SchoolBtn","active")){console.log("School checked");var b=0;a.push(b),$("#Schools").prop("checked","checked")}if(hasClass("SeniorBtn","active")){var b=1;a.push(b),console.log("seniors added")}if(hasClass("TLCBtn","active")){var b=2;a.push(b),console.log("tlc added")}if(hasClass("TownHallBtn","active")){var b=3;a.push(b),console.log("townhall added"),a.push(b)}if(hasClass("WorkshopBtn","active")){var b=4;a.push(b),console.log("workshops added"),a.push(b)}outreachLayer.setVisibleLayers(a)}function hasClass(a,b){for(var c=document.getElementById(a).className.split(/\s+/),d=0;d<c.length;d++)if(c[d]==b)return!0;return!1}function checkSummaryLegend(){injurySum?(police?$("#injurySumLegendType").text("Police Precinct"):community?$("#injurySumLegendType").text("Community District"):council&&$("#injurySumLegendType").text("City Council District"),$("#injurySumLegend").css("display","block"),$("#fatalitySumLegend").css("display","none")):fatalitySum&&(police?$("#fatalSumLegendType").text("Police Precinct"):community?$("#fatalSumLegendType").text("Community District"):council&&$("#fatalSumLegendType").text("City Council District"),$("#injurySumLegend").css("display","none"),$("#fatalitySumLegend").css("display","block"))}function checkSummaryBtns(a){console.log("check"),a.length=0,police?a.push(0):community?a.push(1):council&&a.push(2),injurySum?(console.log("get here?"),summaryInjuryLayer.setVisibility(!0),summaryFatalityLayer.setVisibility(!1),summaryInjuryLayer.setVisibleLayers(a)):fatalitySum&&(summaryInjuryLayer.setVisibility(!1),summaryFatalityLayer.setVisibility(!0),summaryFatalityLayer.setVisibleLayers(a)),checkSummaryLegend(),console.log(a)}function showLoading(){$("#loadingImg").show()}function hideLoading(){$("#loadingImg").hide()}function hideSlider(){$("#sliderDiv").hide()}function showSlider(){$("#sliderDiv").show(),$("#sliderDiv").css("opacity",1)}function removeLayer(){var a=map.getLayer("outreachLayer"),b=map.getLayer("interventionLayer"),c=map.getLayer("referenceLayer"),d=map.getLayer("summaryInjuryLayer"),e=map.getLayer("summaryFatalityLayer");a&&map.removeLayer(a),b&&map.removeLayer(b),c&&map.removeLayer(c),d&&map.removeLayer(d),e&&map.removeLayer(e)}function allLayersOff(){fatality=!1,injury=!1,monthly=!1,yearly=!1,interventions=!1,outreach=!1}function checkCrashLegend(){var a=map.getScale();injury?yearly?a>64e3?($("#densityLegend").css("display","block"),$("#fatalityLegend").css("display","none"),$("#injuryLegend").css("display","none"),ped?$("#densityLegendText").text("Density of Pedestrian Injuries By Year"):bike?$("#densityLegendText").text("Density of Cyclist Injuries By Year"):motor?$("#densityLegendText").text("Density of Motorist Injuries By Year"):all&&$("#densityLegendText").text("Density of All Injuries By Year")):64001>a&&($("#densityLegend").css("display","none"),$("#fatalityLegend").css("display","block"),$("#injuryLegend").css("display","block")):monthly&&($("#densityLegend").css("display","none"),$("#fatalityLegend").css("display","block"),$("#injuryLegend").css("display","block")):fatality&&($("#densityLegend").css("display","none"),$("#fatalityLegend").css("display","block"),$("#injuryLegend").css("display","none"))}function toggleCrashLayers(){var a,b,c;a=injury?"Injuries":"Fatalities",b=yearly?"Yearly":"Monthly",all?c="All":ped?c="Pedestrian":bike?c="Cyclist":motor&&(c="Motorist");var d=c+" "+a+": "+b;if(console.log(d),$("#boxLabel").text("Citywide Total For"),$("#layerLabel").text(d),injury){var e=[];if(monthly){if(all){allCrashLayersOff(),injury_monthly_all_Layer.setVisibility(!0),$("#jqxslider").css("display","block"),$("#jqxslider2").css("display","none");var f=$("#jqxslider").jqxSlider("getValue");f=8*f,e.length=0,e.push(f,f+1,f+2,f+3,f+4,f+5,f+6,f+7),injury_monthly_all_Layer.setVisibleLayers(e),$("#jqxslider").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider").jqxSlider("getValue");console.log(a);var b=sliderLookup(a);$("#dateLabel").text(b),console.log("stats? :"+stats[a].SUM_BikeFat),a=8*a,e.length=0,e.push(a,a+1,a+2,a+3,a+4,a+5,a+6,a+7),injury_monthly_all_Layer.setVisibleLayers(e)})}else if(ped){allCrashLayersOff(),injury_monthly_ped_Layer.setVisibility(!0),$("#jqxslider").css("display","block"),$("#jqxslider2").css("display","none");var f=$("#jqxslider").jqxSlider("getValue");f=8*f,e.length=0,e.push(f,f+1,f+2,f+3,f+4,f+5,f+6,f+7),injury_monthly_ped_Layer.setVisibleLayers(e),$("#jqxslider").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider").jqxSlider("getValue"),b=sliderLookup(a);$("#dateLabel").text(b),a=8*a,e.length=0,e.push(a,a+1,a+2,a+3,a+4,a+5,a+6,a+7),injury_monthly_ped_Layer.setVisibleLayers(e)})}else if(bike){allCrashLayersOff(),injury_monthly_bike_Layer.setVisibility(!0),$("#jqxslider").css("display","block"),$("#jqxslider2").css("display","none");var f=$("#jqxslider").jqxSlider("getValue"),g=sliderLookup(f);$("#dateLabel").text(g),f=8*f,e.length=0,e.push(f,f+1,f+2,f+3,f+4,f+5,f+6,f+7),injury_monthly_bike_Layer.setVisibleLayers(e),$("#jqxslider").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider").jqxSlider("getValue");a=8*a,e.length=0,e.push(a,a+1,a+2,a+3,a+4,a+5,a+6,a+7),injury_monthly_bike_Layer.setVisibleLayers(e)})}else if(motor){allCrashLayersOff(),injury_monthly_motor_Layer.setVisibility(!0),$("#jqxslider").css("display","block"),$("#jqxslider2").css("display","none");var f=$("#jqxslider").jqxSlider("getValue"),g=sliderLookup(f);$("#dateLabel").text(g),f=8*f,e.length=0,e.push(f,f+1,f+2,f+3,f+4,f+5,f+6,f+7),injury_monthly_motor_Layer.setVisibleLayers(e),$("#jqxslider").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider").jqxSlider("getValue");a=8*a,e.length=0,e.push(a,a+1,a+2,a+3,a+4,a+5,a+6,a+7),injury_monthly_motor_Layer.setVisibleLayers(e)})}}else if(yearly){var e=[];if(all){allCrashLayersOff(),injury_yearly_all_Layer.setVisibility(!0),$("#jqxslider2").css("display","block"),$("#jqxslider").css("display","none");var f=$("#jqxslider2").jqxSlider("getValue"),g=slider2Lookup(f);$("#dateLabel").text(g),console.log(g),f=7*f,console.log("cur: "+f),e.length=0,e.push(f,f+1,f+2,f+3,f+4,f+5,f+6),injury_yearly_all_Layer.setVisibleLayers(e),$("#jqxslider2").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider2").jqxSlider("getValue"),b=slider2Lookup(a);$("#dateLabel").text(b),console.log(b),a=7*a,console.log("cur: "+a),e.length=0,e.push(a,a+1,a+2,a+3,a+4,a+5,a+6),injury_yearly_all_Layer.setVisibleLayers(e)})}else if(ped){allCrashLayersOff(),injury_yearly_ped_Layer.setVisibility(!0),$("#jqxslider2").css("display","block"),$("#jqxslider").css("display","none");var f=$("#jqxslider2").jqxSlider("getValue"),g=slider2Lookup(f);$("#dateLabel").text(g),console.log(g),f=7*f,console.log("cur: "+f),e.length=0,e.push(f,f+1,f+2,f+3,f+4,f+5,f+6),injury_yearly_ped_Layer.setVisibleLayers(e),$("#jqxslider2").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider2").jqxSlider("getValue"),b=slider2Lookup(a);$("#dateLabel").text(b),console.log(b),a=7*a,console.log("cur: "+a),e.length=0,e.push(a,a+1,a+2,a+3,a+4,a+5,a+6),injury_yearly_ped_Layer.setVisibleLayers(e)})}else if(bike){allCrashLayersOff(),injury_yearly_bike_Layer.setVisibility(!0),$("#jqxslider2").css("display","block"),$("#jqxslider").css("display","none");var f=$("#jqxslider2").jqxSlider("getValue"),g=slider2Lookup(f);$("#dateLabel").text(g),console.log(g),f=7*f,console.log("cur: "+f),e.length=0,e.push(f,f+1,f+2,f+3,f+4,f+5,f+6),injury_yearly_bike_Layer.setVisibleLayers(e),$("#jqxslider2").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider2").jqxSlider("getValue"),b=slider2Lookup(a);$("#dateLabel").text(b),console.log(b),a=7*a,console.log("cur: "+a),e.length=0,e.push(a,a+1,a+2,a+3,a+4,a+5,a+6),injury_yearly_bike_Layer.setVisibleLayers(e)})}else if(motor){allCrashLayersOff(),injury_yearly_motor_Layer.setVisibility(!0),$("#jqxslider2").css("display","block"),$("#jqxslider").css("display","none");var f=$("#jqxslider2").jqxSlider("getValue"),g=slider2Lookup(f);$("#dateLabel").text(g),console.log(g),f=7*f,console.log("cur: "+f),e.length=0,e.push(f,f+1,f+2,f+3,f+4,f+5,f+6),injury_yearly_motor_Layer.setVisibleLayers(e),$("#jqxslider2").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider2").jqxSlider("getValue"),b=slider2Lookup(a);$("#dateLabel").text(b),console.log(b),a=7*a,console.log("cur: "+a),e.length=0,e.push(a,a+1,a+2,a+3,a+4,a+5,a+6),console.log(a,a+1,a+2,a+3,a+4,a+5,a+6),injury_yearly_motor_Layer.setVisibleLayers(e)})}}}else if(fatality){var e=[];if(monthly){if(all){allCrashLayersOff(),fatality_monthly_all_Layer.setVisibility(!0),$("#jqxslider").css("display","block"),$("#jqxslider2").css("display","none");var f=$("#jqxslider").jqxSlider("getValue");f=4*f,e.length=0,e.push(f,f+1,f+2,f+3),fatality_monthly_all_Layer.setVisibleLayers(e),$("#jqxslider").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider").jqxSlider("getValue"),b=sliderLookup(a);$("#dateLabel").text(b),a=4*a,e.length=0,e.push(a,a+1,a+2,a+3),fatality_monthly_all_Layer.setVisibleLayers(e)})}else if(ped){allCrashLayersOff(),fatality_monthly_ped_Layer.setVisibility(!0),$("#jqxslider").css("display","block"),$("#jqxslider2").css("display","none");var f=$("#jqxslider").jqxSlider("getValue"),g=sliderLookup(f);$("#dateLabel").text(g),f=4*f,e.length=0,e.push(f,f+1,f+2,f+3),fatality_monthly_ped_Layer.setVisibleLayers(e),$("#jqxslider").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider").jqxSlider("getValue");a=4*a,e.length=0,e.push(a,a+1,a+2,a+3),fatality_monthly_ped_Layer.setVisibleLayers(e)})}else if(bike){allCrashLayersOff(),fatality_monthly_bike_Layer.setVisibility(!0),$("#jqxslider").css("display","block"),$("#jqxslider2").css("display","none");var f=$("#jqxslider").jqxSlider("getValue"),g=sliderLookup(f);$("#dateLabel").text(g),f=4*f,e.length=0,e.push(f,f+1,f+2,f+3),fatality_monthly_bike_Layer.setVisibleLayers(e),$("#jqxslider").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider").jqxSlider("getValue");a=4*a,e.length=0,e.push(a,a+1,a+2,a+3),fatality_monthly_bike_Layer.setVisibleLayers(e)})}else if(motor){allCrashLayersOff(),fatality_monthly_motor_Layer.setVisibility(!0),$("#jqxslider").css("display","block"),$("#jqxslider2").css("display","none");var f=$("#jqxslider").jqxSlider("getValue");f=4*f,e.length=0,e.push(f,f+1,f+2,f+3),console.log("ids: "+e),fatality_monthly_motor_Layer.setVisibleLayers(e),$("#jqxslider").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider").jqxSlider("getValue"),b=sliderLookup(a);$("#dateLabel").text(b),a=4*a,e.length=0,e.push(a,a+1,a+2,a+3),fatality_monthly_motor_Layer.setVisibleLayers(e),console.log("ids after click: "+e)})}}else if(yearly){var e=[];if(all){allCrashLayersOff(),fatality_yearly_all_Layer.setVisibility(!0),$("#jqxslider2").css("display","block"),$("#jqxslider").css("display","none");var f=$("#jqxslider2").jqxSlider("getValue"),g=slider2Lookup(f);$("#dateLabel").text(g),console.log(g),f=4*f,console.log("cur: "+f),e.length=0,e.push(f,f+1,f+2,f+3),fatality_yearly_all_Layer.setVisibleLayers(e),$("#jqxslider2").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider2").jqxSlider("getValue"),b=slider2Lookup(a);$("#dateLabel").text(b),console.log(b),a=4*a,console.log("cur: "+a),e.length=0,e.push(a,a+1,a+2,a+3),fatality_yearly_all_Layer.setVisibleLayers(e)})}else if(ped){allCrashLayersOff(),fatality_yearly_ped_Layer.setVisibility(!0),$("#jqxslider2").css("display","block"),$("#jqxslider").css("display","none");var f=$("#jqxslider2").jqxSlider("getValue"),g=slider2Lookup(f);$("#dateLabel").text(g),console.log(g),f=4*f,console.log("cur: "+f),e.length=0,e.push(f,f+1,f+2,f+3),fatality_yearly_ped_Layer.setVisibleLayers(e),$("#jqxslider2").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider2").jqxSlider("getValue"),b=slider2Lookup(a);$("#dateLabel").text(b),console.log(b),a=4*a,console.log("cur: "+a),e.length=0,e.push(a,a+1,a+2,a+3),fatality_yearly_ped_Layer.setVisibleLayers(e)})}else if(bike){allCrashLayersOff(),fatality_yearly_bike_Layer.setVisibility(!0),$("#jqxslider2").css("display","block"),$("#jqxslider").css("display","none");var f=$("#jqxslider2").jqxSlider("getValue"),g=slider2Lookup(f);$("#dateLabel").text(g),console.log(g),f=4*f,console.log("cur: "+f),e.length=0,e.push(f,f+1,f+2,f+3),fatality_yearly_bike_Layer.setVisibleLayers(e),$("#jqxslider2").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider2").jqxSlider("getValue"),b=slider2Lookup(a);$("#dateLabel").text(b),console.log(b),a=4*a,console.log("cur: "+a),e.length=0,e.push(a,a+1,a+2,a+3),fatality_yearly_bike_Layer.setVisibleLayers(e)})}else if(motor){allCrashLayersOff(),fatality_yearly_motor_Layer.setVisibility(!0),$("#jqxslider2").css("display","block"),$("#jqxslider").css("display","none");var f=$("#jqxslider2").jqxSlider("getValue"),g=slider2Lookup(f);$("#dateLabel").text(g),console.log(g),f=4*f,console.log("cur: "+f),e.length=0,e.push(f,f+1,f+2,f+3),fatality_yearly_motor_Layer.setVisibleLayers(e),$("#jqxslider2").bind("change",function(){map.infoWindow.hide();var a=$("#jqxslider2").jqxSlider("getValue"),b=slider2Lookup(a);$("#dateLabel").text(b),a=4*a,console.log("cur: "+a),e.length=0,e.push(a,a+1,a+2,a+3),console.log(a,a+1,a+2,a+3,a+4,a+5,a+6),fatality_yearly_motor_Layer.setVisibleLayers(e)})}}}checkCrashLegend(),checkStats()}function allCrashLayersOff(){injury_yearly_all_Layer.setVisibility(!1),injury_yearly_ped_Layer.setVisibility(!1),injury_yearly_motor_Layer.setVisibility(!1),injury_yearly_bike_Layer.setVisibility(!1),injury_monthly_all_Layer.setVisibility(!1),injury_monthly_ped_Layer.setVisibility(!1),injury_monthly_motor_Layer.setVisibility(!1),injury_monthly_bike_Layer.setVisibility(!1),fatality_yearly_all_Layer.setVisibility(!1),fatality_yearly_ped_Layer.setVisibility(!1),fatality_yearly_motor_Layer.setVisibility(!1),fatality_yearly_bike_Layer.setVisibility(!1),fatality_monthly_all_Layer.setVisibility(!1),fatality_monthly_ped_Layer.setVisibility(!1),fatality_monthly_motor_Layer.setVisibility(!1),fatality_monthly_bike_Layer.setVisibility(!1)}function checkCrashCatState(){map.infoWindow.hide(),setTimeout(function(){$("#injuriesBtn").hasClass("active")?(console.log("Injuries"),injury=!0,fatality=!1,$("#fatalitiesBtn").css("color","#777"),$("#injuriesBtn").css("color","rgb(255,255,255)")):$("#fatalitiesBtn").hasClass("active")&&(console.log("Fatalities"),injury=!1,fatality=!0,$("#injuriesBtn").css("color","#777"),$("#fatalitiesBtn").css("color","rgb(255,255,255)")),toggleCrashLayers()},20),setTimeout(function(){$("#monthlyBtn").hasClass("active")?(console.log("monthly"),monthly=!0,yearly=!1,$("#yearlyBtn").css("color","#777"),$("#monthlyBtn").css("color","rgb(255,255,255)")):$("#yearlyBtn").hasClass("active")&&(console.log("yearly"),monthly=!1,yearly=!0,$("#monthlyBtn").css("color","#777"),$("#yearlyBtn").css("color","rgb(255,255,255)")),toggleCrashLayers()},20),console.log(ped+" "+bike+" "+motor+" "+all),toggleCrashLayers()}function zoomTo(a,b){require(["esri/geometry/Point","esri/geometry/webMercatorUtils","esri/graphic"],function(c,d,e){map.graphics.clear();var f=new c(b,a);console.log(f);var g=(d.geographicToWebMercator(f),f.x-3e3),h=f.y-3e3,i=f.x+3e3,j=f.y+3e3,k=new esri.geometry.Extent(g,h,i,j,map.spatialReference);map.setExtent(k);var l=new e(f,symbol,gslocation,infoTemplate);map.graphics.add(l),map.infoWindow.setTitle(l.getTitle()),map.infoWindow.setContent(l.getContent());var m=map.toScreen(f);map.infoWindow.resize(200,100),map.infoWindow.show(m,map.getInfoWindowAnchor(m))})}function LocationSearch(){$("#btnsearch").on("touchstart click",function(){var a=$("#searchBorough").text().trim(),b=$("#address").val();GeoParser(b,a)})}function GeoParser(a,b){return"Boro"==b?void alert("Please select Administrative Boundary on Right"):void("Police Precinct"==b?GetPrecinct(a):"Zip Code"==b?GetZip(a):"Community District"==b?GetCD(a):"City Council District"==b?GetCityCouncil(a):GetGeoSupportJSON(a,b))}function GetGeoSupportJSON(a,b){var c=toTitleCase(a+" "+b);gslocation.location=c,$.getJSON("https://api.cityofnewyork.us/geoclient/v1/search.json?callback=?&app_id=d72f9ac0&app_key=d1d9ba774e1bc021c256c3e53752adc4&input="+c,function(a){0==a.results.length&&alert("No match to location entered."),processGSResult(a)})}function processGSResult(a){$.each(a.results,function(a,b){console.log(b.response.xCoordinate,b.response.yCoordinate),gslocation.lon=parseFloat(b.response.xCoordinate),gslocation.lat=parseFloat(b.response.yCoordinate),console.log(gslocation),zoomTo(gslocation.lat,gslocation.lon)})}function toTitleCase(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function GetCD(a){queryTask=new esri.tasks.QueryTask("http://www.nycdot.info:6080/arcgis/rest/services/GISAPP_GAZETTEER/NYCDOTBasemapAdminBoundaries/MapServer/1"),query=new esri.tasks.Query,query.returnGeometry=!0,query.outFields=["BoroCD"],map.infoWindow.hide(),map.graphics.clear(),query.where="BoroCD  = "+a,queryTask.execute(query,function(a){1===a.features.length&&showFeature(a.features[0])})}function GetZip(){query=new esri.tasks.Query,query.returnGeometry=!0,query.outFields=["BoroCD"],map.infoWindow.hide(),map.graphics.clear(),query.where="BoroCD  = "+cd,queryTask.execute(query,function(a){1===a.features.length&&showFeature(a.features[0])})}function GetPrecinct(a){queryTask=new esri.tasks.QueryTask("http://www.nycdot.info:6080/arcgis/rest/services/GISAPP_GAZETTEER/NYCDOTBasemapAdminBoundaries/MapServer/4"),query=new esri.tasks.Query,query.returnGeometry=!0,query.outFields=["Precinct"],map.infoWindow.hide(),map.graphics.clear(),query.where="Precinct  = "+a,queryTask.execute(query,function(a){1===a.features.length&&showFeature(a.features[0])})}function GetCityCouncil(a){queryTask=new esri.tasks.QueryTask("http://www.nycdot.info:6080/arcgis/rest/services/GISAPP_GAZETTEER/NYCDOTBasemapAdminBoundaries/MapServer/0"),query=new esri.tasks.Query,query.returnGeometry=!0,query.outFields=["CounDist"],map.infoWindow.hide(),map.graphics.clear(),query.where="CounDist  = "+a,queryTask.execute(query,function(a){1===a.features.length&&showFeature(a.features[0])})}function showFeature(a){map.graphics.clear(),a.setSymbol(fillSymbol),map.graphics.add(a);var b=a.geometry.getExtent().expand(5);map.setExtent(b)}function showResults(a){var b=esri.graphicsExtent(a.features);map.setExtent(b.expand(1.5),!0)}function IdentifyTaskInit(){$(document).ready(function(){allIdentifyParams=new esri.tasks.IdentifyParameters,allIdentifyParams.tolerance=4,allIdentifyParams.returnGeometry=!0,allIdentifyParams.layerOption=esri.tasks.IdentifyParameters.LAYER_OPTION_TOP,allIdentifyParams.width=map.width,allIdentifyParams.height=map.height,fatality_monthly_all_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/allFatalities_monthly/MapServer"),fatality_monthly_ped_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/pedFatalities_monthly/MapServer"),fatality_monthly_bike_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/bikeFatalities_monthly/MapServer"),fatality_monthly_motor_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/motorFatalities_monthly/MapServer"),fatality_yearly_all_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/allFatalities_yearly/MapServer"),fatality_yearly_ped_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/pedFatalities_yearly/MapServer"),fatality_yearly_bike_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/bikeFatalities_yearly/MapServer"),fatality_yearly_motor_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/motorFatalities_yearly/MapServer"),injury_monthly_all_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/all_monthly_Injuries_and_fatalities/MapServer"),injury_monthly_ped_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/pedFatalities_and_Injuries_monthly/MapServer"),injury_monthly_bike_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/bikeFatalities_and_Injuries_monthly/MapServer"),injury_monthly_motor_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/motorFatalities_and_Injuries_monthly/MapServer"),injury_yearly_all_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/allInjury_yearly/MapServer"),injury_yearly_ped_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/pedInjury_yearly/MapServer"),injury_yearly_bike_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/bikeInjury_yearly/MapServer"),injury_yearly_motor_IdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/motorInjury_yearly/MapServer"),interventionIdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/SAFETY_INTERVENTION/MapServer"),outreachIdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/OUTREACH/MapServer"),summaryInjIdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/SUMMARY_2014_INJURIES/MapServer"),summaryFatalIdentifyTask=new esri.tasks.IdentifyTask("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/SUMMARY_2014_FATALITIES/MapServer"),dojo.connect(map,"onClick",executeIdentifyTask)})}function executeIdentifyTask(a){if(injury){var b=map.getScale();if(b>64e3)alert("Please zoom in to view feature information");else{map.infoWindow.hide();var c;if(yearly){var d,e=$("#jqxslider2").jqxSlider("getValue");c=7*e,allIdentifyParams.geometry=a.mapPoint,allIdentifyParams.layerIds=[c,c+1,c+2,c+3,c+4,c+5,c+6],allIdentifyParams.mapExtent=map.extent,all?d=injury_yearly_all_IdentifyTask.execute(allIdentifyParams):ped?d=injury_yearly_ped_IdentifyTask.execute(allIdentifyParams):motor?d=injury_yearly_motor_IdentifyTask.execute(allIdentifyParams):bike&&(d=injury_yearly_bike_IdentifyTask.execute(allIdentifyParams))}else if(monthly){var d,e=$("#jqxslider").jqxSlider("getValue");c=8*e,allIdentifyParams.geometry=a.mapPoint,allIdentifyParams.layerIds=[c,c+1,c+2,c+3,c+4,c+5,c+6,c+7,c+8],allIdentifyParams.mapExtent=map.extent,all?d=injury_monthly_all_IdentifyTask.execute(allIdentifyParams):ped?d=injury_monthly_ped_IdentifyTask.execute(allIdentifyParams):motor?d=injury_monthly_motor_IdentifyTask.execute(allIdentifyParams):bike&&(d=injury_monthly_bike_IdentifyTask.execute(allIdentifyParams))}d.addCallback(function(b){return b.length>0?map.infoWindow.show(a.mapPoint):map.infoWindow.hide(),dojo.map(b,function(a){var b,c,d=a.feature,f=a.layerName;if(monthly?(b=f.split("_"),c=b[0]):yearly&&(b=f.charAt(3),c=b),monthly)var g=sliderLookup(e);else if(yearly)var g=slider2Lookup(e);var h;"injuries"==c||"I"==c?yearly?(h="<table><tr><td><b>Total Injuries: </b>&nbsp; </td><td>${Injuries}</td></tr></table>",h+="<table><tr><td><b>Non-Injury Crashes: </b>&nbsp;</td><td> ${nonInj_Crashes}</td></tr></table>"):monthly&&(h="<table><tr><td><b>Total Injuries: </b>&nbsp; </td><td>  ${Injuries}</td></tr></table>",h+="<table><tr><td><b>Non-Injury Crashes: </b>&nbsp;  </td><td> ${Non_Inj_Crashes}</td></tr></table>"):("fatalities"==c||"F"==c)&&(yearly?(h="<table><tr><td><b>Total Fatalities: </b></td><td>&nbsp;   ${Fatalities}</td></tr></table>",h+="<table><tr><td><b>Total Injuries: </b></td><td>&nbsp;   ${Injuries}</td></tr></table>",h+="<table><tr><td><b>Non-Injury Crashes: </b>&nbsp;  </td><td> ${nonInj_Crashes}</td></tr></table>"):monthly&&(h="<table><tr><td><b>Total Fatalities: </b></td><td>&nbsp;   ${Fatalities}</td></tr></table>",h+="<table><tr><td><b>Total Injuries: </b></td><td>&nbsp;   ${Injuries}</td></tr></table>",h+="<table><tr><td><b>Non-Injury Crashes: </b></td><td>&nbsp;   ${Non_Inj_Crashes}</td></tr></table>"));var i=new esri.InfoTemplate;return i.setTitle(g),i.setContent(h),d.setInfoTemplate(i),d})}),map.infoWindow.setFeatures([d])}}else if(fatality){var c;if(map.infoWindow.hide(),yearly){var d,e=$("#jqxslider2").jqxSlider("getValue");c=4*e,allIdentifyParams.geometry=a.mapPoint,allIdentifyParams.layerIds=[c,c+1,c+2,c+3],allIdentifyParams.mapExtent=map.extent,console.log(allIdentifyParams.layerIds),all?d=fatality_yearly_all_IdentifyTask.execute(allIdentifyParams):ped?d=fatality_yearly_ped_IdentifyTask.execute(allIdentifyParams):motor?d=fatality_yearly_motor_IdentifyTask.execute(allIdentifyParams):bike&&(d=fatality_yearly_bike_IdentifyTask.execute(allIdentifyParams))}else if(monthly){var d,e=$("#jqxslider").jqxSlider("getValue");c=4*e,allIdentifyParams.geometry=a.mapPoint,allIdentifyParams.layerIds=[c,c+1,c+2,c+3],allIdentifyParams.mapExtent=map.extent,console.log("month "+allIdentifyParams.layerIds),all?d=fatality_monthly_all_IdentifyTask.execute(allIdentifyParams):ped?d=fatality_monthly_ped_IdentifyTask.execute(allIdentifyParams):motor?d=fatality_monthly_motor_IdentifyTask.execute(allIdentifyParams):bike&&(d=fatality_monthly_bike_IdentifyTask.execute(allIdentifyParams))}d.addCallback(function(b){return b.length>0?map.infoWindow.show(a.mapPoint):map.infoWindow.hide(),dojo.map(b,function(a){var b=a.feature;if(monthly)var c=sliderLookup(e);else if(yearly)var c=slider2Lookup(e);var d;yearly?(d="<table><tr><td><b>Total Fatalites: </b>&nbsp; </td><td> ${Fatalities}</td></tr></table>",d+="<table><tr><td><b>Non-Injury Crashes: </b>&nbsp; </td><td> ${nonInj_Crashes}</td></tr></table>"):monthly&&(d="<table><tr><td><b>Total Fatalites: </b>&nbsp; </td><td> ${Fatalities}</td></tr></table>",d+="<table><tr><td><b>Non-Injury Crashes: </b>&nbsp; </td><td> ${Non_Inj_Crashes}</td></tr></table>");var f=new esri.InfoTemplate;return f.setTitle(c),f.setContent(d),b.setInfoTemplate(f),b})}),map.infoWindow.setFeatures([d])}else if(interventions){var d;allIdentifyParams.geometry=a.mapPoint,allIdentifyParams.layerIds=[interventionLayerIDs],allIdentifyParams.mapExtent=map.extent,d=interventionIdentifyTask.execute(allIdentifyParams),d.addCallback(function(b){return b.length>0?map.infoWindow.show(a.mapPoint):map.infoWindow.hide(),dojo.map(b,function(a){var b=a.feature,c=a.layerName;console.log("layername"+c);var d=new esri.InfoTemplate;switch(c){case"ASZ_Final_Dissolve":locTxt="<table><tr><td><b>Corridor: </b>${CORRIDOR}</td></tr>",locTxt+="<tr><td>From&nbsp;${FROM_STREET}",locTxt+=" To&nbsp;${TO_STREET}</td></tr></table>",d.setTitle("Arterial Slow Zones");break;case"Safe_Streets_For_Seniors_preVZ":locTxt="<table><tr><td><b>Name:</b>&nbsp; ${Name}</td></tr>",locTxt+="<tr><td><b>Year:</b>&nbsp;   ${Year}</td></tr></table>",d.setTitle("Safe Streets For Seniors");break;case"Neighborhood_Slow_Zones_pre_post_VZ":locTxt="<table><tr><td><b>Name:&nbsp; </b>${Name}</td></tr>",locTxt+="<tr><td><b>Year:</b>&nbsp; ${Year}</td></tr></table>",d.setTitle("Neighborhood Slow Zones");break;case"SAFETY_ENGG_SIP_Corridors":case"SAFETY_ENGG_SIP_Intersections":locTxt="<table><tr><td><b>Project Name:&nbsp;</b>${Pjct_Name}</td></tr>",locTxt+="<tr><td><b>Project Type:</b>&nbsp;${SIPProjTyp}</td></tr></table>",d.setTitle("Safety Engineering Projects");
break;case"sb_2014Dissolve_0725":locTxt="<table><tr><td><b>On Street:&nbsp; </b>${FIRST_Main}</td></tr>",locTxt+="<tr><td>From&nbsp; ${FIRST_From}",locTxt+=" To&nbsp;${FIRST_ToSt}</td></tr>",locTxt+="<tr><td><b>Date Installed:</b> &nbsp;${FIRST_Inst}</td></tr>",locTxt+="<tr><td><b>Num. of Humps::</b> &nbsp;${FIRST_NumO}</td></tr></table>",d.setTitle("Speed Humps");break;case"LPI":locTxt="<table><tr><td><b>Main Street:&nbsp; </b>${MainStreet}</td></tr>",locTxt+="<tr><td><b>Cross Street:</b>&nbsp; ${CrossStree}</td></tr></table>",d.setTitle("Leading Pedestrian Signals");break;default:locTxt="No data available"}return d.setContent(locTxt),b.setInfoTemplate(d),b})}),map.infoWindow.setFeatures([d])}else if(outreach){var d;allIdentifyParams.geometry=a.mapPoint,allIdentifyParams.layerIds=[outreachLayerIDs],allIdentifyParams.mapExtent=map.extent,d=outreachIdentifyTask.execute(allIdentifyParams),d.addCallback(function(b){return b.length>0?map.infoWindow.show(a.mapPoint):map.infoWindow.hide(),dojo.map(b,function(a){var b=a.feature,c=a.layerName,d=new esri.InfoTemplate;switch(c){case"Outreach_schools":locTxt="<table><tr><td><b>School: </b>&nbsp;${SiteServed}</td></tr>",locTxt+="<tr><td><b>Activity:</b> &nbsp; ${Activity}</td></tr>",locTxt+="<tr><td><b>Event Date:</b> &nbsp;${EventDate}</td></tr>",d.setTitle("School Outreach Events");break;case"TownHallLocations":locTxt="<table><tr><td><b>Location: </b>&nbsp;${Sheet1__NA}</td></tr>",locTxt+="<tr><td><b>Address:</b>&nbsp; ${Sheet1__AD}</td></tr></table>",d.setTitle("Town Halls");break;case"workshop_locations":locTxt="<table><tr><td><b>Location:&nbsp; </b>${Sheet1__Na}</td></tr>",locTxt+="<tr><td><b>Year:</b>&nbsp; ${Sheet1__AD}</td></tr></table>",d.setTitle("Workshops");break;case"Senior_Centers":locTxt="<table><tr><td><b>Location:&nbsp;</b>${Site_Serve}</td></tr>",locTxt+="<tr><td><b>Event:&nbsp; </b>${Activity}</td></tr>",locTxt+="<tr><td><b>Event Date:&nbsp; </b>${EventDate}</td></tr></table>",d.setTitle("Senior Centers");break;case"tlc":locTxt="<table><tr><td><b>Location:&nbsp;</b>${Title}</td></tr>",locTxt+="<tr><td><b>Address:&nbsp;</b>${Location}</td></tr></table>",d.setTitle("TLC");break;default:locTxt="No data available"}return d.setContent(locTxt),b.setInfoTemplate(d),b})}),map.infoWindow.setFeatures([d])}else if(injurySum||fatalitySum){var d;allIdentifyParams.geometry=a.mapPoint,allIdentifyParams.layerIds=[summaryLayerIDs],allIdentifyParams.mapExtent=map.extent,injurySum&&(d=summaryInjIdentifyTask.execute(allIdentifyParams)),fatalitySum&&(d=summaryFatalIdentifyTask.execute(allIdentifyParams)),d.addCallback(function(b){return console.log("get to callback"),b.length>0?map.infoWindow.show(a.mapPoint):map.infoWindow.hide(),dojo.map(b,function(a){var b=a.feature,c=a.layerName,d=new esri.InfoTemplate;switch(c){case"Summary_2014_PP_ALL_FATALITIES":case"Summary_2014_PP_ALL_INJURIES":locTxt="<table><tr><td><b>Precinct: </b>&nbsp;</td><td>${Precinct}</td></tr>",d.setTitle("Police Precinct Summary: 2014 YTD");break;case"Summary_2014_CD_ALL_FATALITIES":case"Summary_2014_CD_ALL_INJURIES":locTxt="<table><tr><td><b>Community District: </b>&nbsp;</td><td>${BoroCD}</td></tr>",d.setTitle("Community District Summary: 2014 YTD");break;case"Summary_2014_CC_ALL_FATALITIES":case"Summary_2014_CC_ALL_INJURIES":locTxt="<table><tr><td><b>Council District: </b>&nbsp;</td><td>${CounDist}</td></tr>",d.setTitle("City Council Summary: 2014 YTD")}return locTxt+="<tr><td><b>Total fatalites:</b>&nbsp; </td><td>${SUM_Fatalities}</td></tr>",locTxt+="<tr><td><b>Total Injuries:</b>&nbsp; </td><td>${SUM_Injuries}</td></tr>",locTxt+="<tr><td><b>Pedestrian Fatalites:</b>&nbsp; </td><td>${SUM_PedFatalities}</td></tr>",locTxt+="<tr><td><b>Pedestrian Injuries:</b>&nbsp;  </td><td>${SUM_PedInjuries}</td></tr>",locTxt+="<tr><td><b>Bicycle Fatalites:</b>&nbsp; </td><td> ${SUM_BikeFatalities}</td></tr>",locTxt+="<tr><td><b>Bicycle Injuries:</b>&nbsp; </td><td> ${SUM_BikeInjuries}</td></tr>",locTxt+="<tr><td><b>Motorist Fatalites:</b> &nbsp; </td><td>${SUM_MVOFatalities}</td></tr>",locTxt+="<tr><td><b>Motorist Injuries:</b>&nbsp; </td><td>${SUM_MVOInjuries}</td></tr>",locTxt+="<tr><td><b>Non-Injury Crashes:</b>&nbsp; </td><td>${SUM_nonInj_Crashes}</td></tr></table>",d.setContent(locTxt),b.setInfoTemplate(d),b})}),map.infoWindow.setFeatures([d])}}function resizeMap(){var a=$("#navbarDIV").outerHeight(!0),b=$("#blackBar").outerHeight(!0),c=$("#footer").outerHeight(!0),d=$("#sidebar").outerHeight(!0),e=a+b+c;if(map&&""==window.location.hash){var f=window.innerHeight-e-15;$("#map").height(f>d?f:d),map.reposition(),map.resize()}}function orientationChanged(a){switch(a){case-90:case 90:}map&&resizeMap()}function mapWinEvent(){var a="orientationchange"in window,b=a?"orientationchange":"resize";window.addEventListener(b,function(){orientationChanged(window.orientation)},!1),window.addEventListener("resize",function(){map&&resizeMap()},!1)}function sliderSetup(){function a(){var a=$("<div />");return $(document.body).append(a),a.css("visibility","hidden"),a.fadeTo(0,2),a.addClass("jqx-rc-all"),a.addClass("tooltip"),a}function b(a){var b=$($("#jqxslider").find(".jqx-slider-slider")[1]),c=b.offset().left,e=b.offset().top;d.css("left",c-(d.outerWidth(!0)-b.outerWidth(!0))/2),d.css("top",e-d.outerHeight(!0)-25);var f=sliderLookup(a);$("#dateLabel").text(f),d.text(f)}var c=$($("#jqxslider").find(".jqx-slider-slider")[1]),d=a(),e=!0;c.bind("mousedown",function(){d.css("visibility","hidden"),b($("#jqxslider").jqxSlider("value")),e=!0}),$(document).bind("mousemove",function(){e&&b($("#jqxslider").jqxSlider("value"))}),$(document).bind("mouseup",function(){d.css("visibility","hidden"),e=!1})}function sliderLookup(a){var b,c,d=a%12,e=parseInt(a/12);switch(d){case 0:b="Jan";break;case 1:b="Feb";break;case 2:b="March";break;case 3:b="Apr";break;case 4:b="May";break;case 5:b="June";break;case 6:b="July";break;case 7:b="Aug";break;case 8:b="Sept";break;case 9:b="Oct";break;case 10:b="Nov";break;case 11:b="Dec";break;default:b="Jan"}switch(e){case 0:c="2009";break;case 1:c="2010";break;case 2:c="2011";break;case 3:c="2012";break;case 4:c="2013";break;case 5:c="2014 YTD";break;default:c="2009"}var f=b+" "+c;return f}function slider2Lookup(a){var b;switch(a){case 0:b="2009";break;case 1:b="2010";break;case 2:b="2011";break;case 3:b="2012";break;case 4:b="2013";break;case 5:b="2014";break;default:b="2009"}return b}function checkStats(){if(monthly){var a=$("#jqxslider").jqxSlider("getValue");ped?($("#stat1").text("Pedestrian Fatalities: "+stats[a].SUM_PedFat),$("#stat2").text("Pedestrian Injuries: "+stats[a].SUM_PedInj)):bike?($("#stat1").text("Cyclist Fatalities: "+stats[a].SUM_BikeFat),$("#stat2").text("Cyclist Injuries: "+stats[a].SUM_BikeInj)):motor?($("#stat1").text("Motorist Fatalities: "+stats[a].SUM_MVOFat),$("#stat2").text("Motorist Injuries: "+stats[a].SUM_MVOInj)):all&&($("#stat1").text("All Fatalities: "+stats[a].SUM_Fatalities),$("#stat2").text("All Injuries: "+stats[a].SUM_Injuries))}else if(yearly){$("#stat1").text("yearly stats available soon"),$("#stat2").text("please check again later");var a=$("#jqxslider2").jqxSlider("getValue");ped?($("#stat1").text("Pedestrian Fatalities: "+stats2[a].SUM_PedFat),$("#stat2").text("Pedestrian Injuries: "+stats2[a].SUM_PedInj)):bike?($("#stat1").text("Cyclist Fatalities: "+stats2[a].SUM_BikeFat),$("#stat2").text("Cyclist Injuries: "+stats2[a].SUM_BikeInj)):motor?($("#stat1").text("Motorist Fatalities: "+stats2[a].SUM_MVOFat),$("#stat2").text("Motorist Injuries: "+stats2[a].SUM_MVOInj)):all&&($("#stat1").text("All Fatalities: "+stats2[a].SUM_Fatalities),$("#stat2").text("All Injuries: "+stats2[a].SUM_Injuries))}}function isIE(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}else if("Netscape"==navigator.appName){var b=navigator.userAgent,c=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}return-1==a?!1:!0}$(document).ready(function(){console.log("body?")}),dojo.connect(map,"onload",function(){console.log("loaded")}),$(".interventionBtns").on(" touchstart  click",function(){map.infoWindow.hide(),interventionLayerIDs=[];var a=this;interventionLayerIDs.length=0,setTimeout(function(){$(a).hasClass("active")?($(a).css("background-color","#e4e4e4"),$(a).find("i").css("opacity",1),$(a).find("span").css("opacity",1)):($(a).css("background-color","white"),$(a).find("i").css("opacity",.6),$(a).find("span").css("opacity",.6))},30),console.log(interventionLayerIDs),setTimeout(function(){checkInterventionBtns(interventionLayerIDs)},20)}),$(".outreachBtns").on("touchstart  click",function(){map.infoWindow.hide(),outreachLayerIDs=[],outreachLayerIDs.length=0;var a=this;setTimeout(function(){$(a).hasClass("active")?($(this).removeClass("active"),$(a).css("background-color","#e4e4e4"),$(a).find("i").css("opacity",1),$(a).find("span").css("opacity",1)):($(this).addClass("active"),$(a).css("background-color","white"),$(a).find("i").css("opacity",.6),$(a).find("span").css("opacity",.6))},30),setTimeout(function(){checkOutreachBtns(outreachLayerIDs)},20)}),$(".summarySwitchBtns").on("touchstart  click",function(){map.infoWindow.hide(),summaryLayerIDs.length=0,console.log(summaryLayerIDs),setTimeout(function(){$("#summaryInjuries").hasClass("active")?($("#summaryFatalities").css("color","#777"),$("#summaryInjuries").css("color","white"),console.log("injury active"),injurySum=!0,fatalitySum=!1):$("#summaryFatalities").hasClass("active")&&($("#summaryInjuries").css("color","#777"),$("#summaryFatalities").css("color","white"),console.log("fatality active"),fatalitySum=!0,injurySum=!1)},20),setTimeout(function(){checkSummaryBtns(summaryLayerIDs)},20)}),$(".districtBtns").on("touchstart  click",function(){map.infoWindow.hide();var a=$(this).find("input").attr("id");summaryLayerIDs.length=0;$(".districtBtns").css("background-color","rgb(255,255,255)"),$(".districtBtns").css("color","#777"),$(this).css("background-color","#3276b1"),$(this).css("color","white"),"policePrecinct"==a?(police=!0,community=!1,council=!1,console.log("precinct"),setTimeout(function(){checkSummaryBtns(summaryLayerIDs)},20)):"communityDistrict"==a?(police=!1,community=!0,council=!1,console.log("communityDistrict"),setTimeout(function(){checkSummaryBtns(summaryLayerIDs)},20)):"cityCouncilDistrict"==a&&(police=!1,community=!1,council=!0,console.log("cityCouncilDistrict"),setTimeout(function(){checkSummaryBtns(summaryLayerIDs)},20))}),$(document).ready(function(){$("#ArterialSlowZone").prop("checked",!0),$("#ArterialSlowZone").addClass("active"),$("#SafeStreetsForSeniors").prop("checked",!1),$("#NeighborhoodSlowZone").prop("checked",!1),$("#EngineeringImprovements").prop("checked",!1),$("#SpeedHump").prop("checked",!1),$("#LeadingPedestrianSignals").prop("checked",!1),$("#Schools").prop("checked",!0),$("#Schools").addClass("active"),$("#TLC").prop("checked",!1),$("#TownHallMeeting").prop("checked",!1),$("#Workshops").prop("checked",!1),$("#SeniorCenters").prop("checked",!1),$("#summaryInjuries").prop("checked",!0),$("#summaryInjuries").addClass("active"),police=!0,community=!1,council=!1,injurySum=!0,fatalitySum=!1}),$(".categoriesNav").on("touchstart click",function(){var a=this.id;allCrashLayersOff(),removeLayer(),allLayersOff(),map.infoWindow.hide(),"summaryCat"==a?(summaryInjuryLayer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/SUMMARY_2014_INJURIES/MapServer",{id:"summaryInjuryLayer"}),AddLayer(summaryInjuryLayer,!1),summaryFatalityLayer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/SUMMARY_2014_FATALITIES/MapServer",{id:"summaryFatalityLayer"}),AddLayer(summaryFatalityLayer,!1),console.log("injurSum = "+injurySum+"    fatalitySum = "+fatalitySum),injurySum?(summaryInjuryLayer.setVisibility(!0),summaryFatalityLayer.setVisibility(!1)):fatalitySum&&(summaryInjuryLayer.setVisibility(!1),summaryFatalityLayer.setVisibility(!0)),$("#sliderDiv").css("display","none"),$("#jqxslider").css("display","none"),$("#jqxslider2").css("display","none"),$("#labelDiv").css("display","none"),fatality=!1,injury=!1,monthly=!1,yearly=!1,setTimeout(function(){checkSummaryBtns(summaryLayerIDs)},20)):"interventionCat"==a?(interventionLayer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/SAFETY_INTERVENTION/MapServer",{id:"interventionLayer",opacity:.8}),AddLayer(interventionLayer,!0),interventions=!0,interventionLayerIDs=[],setTimeout(function(){checkInterventionBtns(interventionLayerIDs)},30),$("#sliderDiv").css("display","none"),$("#jqxslider").css("display","none"),$("#jqxslider2").css("display","none"),$("#labelDiv").css("display","none")):"outreachCat"==a?(outreachLayer=new esri.layers.ArcGISDynamicMapServiceLayer("http://"+arcgisserver+"/arcgis/rest/services/VISION_ZERO/OUTREACH/MapServer",{id:"outreachLayer"}),AddLayer(outreachLayer,!0),outreach=!0,outreachLayerIDs=[],setTimeout(function(){checkOutreachBtns(outreachLayerIDs)},30),$("#sliderDiv").css("display","none"),$("#jqxslider").css("display","none"),$("#jqxslider2").css("display","none"),$("#labelDiv").css("display","none")):"injuryCat"==a&&(checkCrashCatState(),$("#sliderDiv").css("display","block"),$("#labelDiv").css("display","block"),monthly?($("#jqxslider").css("display","block"),$("#jqxslider2").css("display","none")):yearly&&($("#jqxslider2").css("display","block"),$("#jqxslider").css("display","none")))}),$(document).ready(function(){$(".crashTypeSwitchBtns").on("touchstart  click",function(){console.log("get click"),map.infoWindow.hide(),setTimeout(function(){$("#injuriesBtn").hasClass("active")?(console.log("Injuries"),injury=!0,fatality=!1,$("#fatalitiesBtn").css("color","#777"),$("#injuriesBtn").css("color","#FFF")):$("#fatalitiesBtn").hasClass("active")&&(console.log("Fatalities"),injury=!1,fatality=!0,$("#injuriesBtn").css("color","#777"),$("#fatalitiesBtn").css("color","rgb(255,255,255)")),toggleCrashLayers()},20)})}),$(document).ready(function(){$(".crashTimeSwitchBtns").on("touchstart  click",function(){console.log("get click"),map.infoWindow.hide(),setTimeout(function(){$("#monthlyBtn").hasClass("active")?(console.log("monthly"),monthly=!0,yearly=!1,$("#yearlyBtn").css("color","#777"),$("#monthlyBtn").css("color","rgb(255,255,255)")):$("#yearlyBtn").hasClass("active")&&(console.log("yearly"),monthly=!1,yearly=!0,$("#monthlyBtn").css("color","#777"),$("#yearlyBtn").css("color","rgb(255,255,255)")),toggleCrashLayers()},20)})}),$(document).ready(function(){all=!0,$(".crashTypes").on("touchstart click",function(){map.infoWindow.hide(),$(".crashTypes").css("background-color","rgb(255,255,255)"),$(".crashTypes").css("color","#777"),$(this).css("background-color","#3276b1"),$(this).css("color","white");var a=$(this).find("input").attr("id");switch(console.log(a),a){case"ped":ped=!0,bike=!1,motor=!1,all=!1;break;case"motor":ped=!1,bike=!1,motor=!0,all=!1;break;case"bike":ped=!1,bike=!0,motor=!1,all=!1;break;case"all":ped=!1,bike=!1,motor=!1,all=!0;break;default:all=!0}console.log(ped+" "+bike+" "+motor+" "+all),toggleCrashLayers()})}),$(document).ready(function(){$(".dropdown-menu li a").on("touchstart click",function(){var a=$(this).text();$(this).parents(".input-group").find(".dropdown-toggle").html(a+' <span class="caret"></span>')}),LocationSearch()}),$(document).ready(function(){$("#sliderDiv").css("display","none"),$("#jqxslider").jqxSlider({theme:"orange",value:0,min:0,max:64,mode:"fixed",step:1,ticksFrequency:1,tooltip:!0});for(var a=$("#jqxslider .jqx-slider-tickscontainer:eq(0)").children(),b=$("#jqxslider .jqx-slider-tickscontainer:eq(1)").children(),c=0;c<a.length;c++)c%12!=0&&$(b[c]).css("display","none");$("#sliderDiv").css("display","block")}),$(document).ready(function(){$("#jqxslider2").jqxSlider({theme:"orange",value:0,min:0,max:5,mode:"fixed",step:1,ticksFrequency:1,tooltip:!0});$("#jqxslider .jqx-slider-tickscontainer:eq(0)").children()});var stats=[{FREQUENCY:8727,SUM_CRASHES:13508,SUM_Inj_Crashes:2423,SUM_Fatalities:10,SUM_Injuries:3292,SUM_PedFat:9,SUM_PedInj:947,SUM_BikeFat:0,SUM_BikeInj:87,SUM_MVOFat:1,SUM_MVOInj:2258,SUM_Non_Inj:11085,Date:"1/1/2009"},{FREQUENCY:7750,SUM_CRASHES:11614,SUM_Inj_Crashes:2250,SUM_Fatalities:13,SUM_Injuries:3051,SUM_PedFat:7,SUM_PedInj:933,SUM_BikeFat:0,SUM_BikeInj:123,SUM_MVOFat:6,SUM_MVOInj:1995,SUM_Non_Inj:9364,Date:"2/1/2009"},{FREQUENCY:8514,SUM_CRASHES:13146,SUM_Inj_Crashes:2550,SUM_Fatalities:5,SUM_Injuries:3503,SUM_PedFat:2,SUM_PedInj:983,SUM_BikeFat:1,SUM_BikeInj:168,SUM_MVOFat:2,SUM_MVOInj:2352,SUM_Non_Inj:10596,Date:"3/1/2009"},{FREQUENCY:8336,SUM_CRASHES:12964,SUM_Inj_Crashes:2659,SUM_Fatalities:18,SUM_Injuries:3790,SUM_PedFat:8,SUM_PedInj:951,SUM_BikeFat:1,SUM_BikeInj:218,SUM_MVOFat:9,SUM_MVOInj:2621,SUM_Non_Inj:10305,Date:"4/1/2009"},{FREQUENCY:8319,SUM_CRASHES:12999,SUM_Inj_Crashes:2060,SUM_Fatalities:7,SUM_Injuries:2916,SUM_PedFat:3,SUM_PedInj:651,SUM_BikeFat:1,SUM_BikeInj:191,SUM_MVOFat:3,SUM_MVOInj:2074,SUM_Non_Inj:10939,Date:"5/1/2009"},{FREQUENCY:8916,SUM_CRASHES:14323,SUM_Inj_Crashes:2961,SUM_Fatalities:9,SUM_Injuries:4213,SUM_PedFat:3,SUM_PedInj:895,SUM_BikeFat:2,SUM_BikeInj:356,SUM_MVOFat:4,SUM_MVOInj:2962,SUM_Non_Inj:11362,Date:"6/1/2009"},{FREQUENCY:8785,SUM_CRASHES:14036,SUM_Inj_Crashes:3050,SUM_Fatalities:10,SUM_Injuries:4369,SUM_PedFat:7,SUM_PedInj:862,SUM_BikeFat:0,SUM_BikeInj:436,SUM_MVOFat:3,SUM_MVOInj:3071,SUM_Non_Inj:10986,Date:"7/1/2009"},{FREQUENCY:8547,SUM_CRASHES:13513,SUM_Inj_Crashes:2907,SUM_Fatalities:22,SUM_Injuries:4064,SUM_PedFat:9,SUM_PedInj:842,SUM_BikeFat:3,SUM_BikeInj:454,SUM_MVOFat:10,SUM_MVOInj:2768,SUM_Non_Inj:10606,Date:"8/1/2009"},{FREQUENCY:8439,SUM_CRASHES:13512,SUM_Inj_Crashes:2863,SUM_Fatalities:12,SUM_Injuries:3969,SUM_PedFat:7,SUM_PedInj:893,SUM_BikeFat:1,SUM_BikeInj:331,SUM_MVOFat:4,SUM_MVOInj:2745,SUM_Non_Inj:10649,Date:"9/1/2009"},{FREQUENCY:9074,SUM_CRASHES:14703,SUM_Inj_Crashes:3039,SUM_Fatalities:17,SUM_Injuries:4204,SUM_PedFat:8,SUM_PedInj:1086,SUM_BikeFat:0,SUM_BikeInj:297,SUM_MVOFat:9,SUM_MVOInj:2821,SUM_Non_Inj:11664,Date:"10/1/2009"},{FREQUENCY:8340,SUM_CRASHES:12978,SUM_Inj_Crashes:2564,SUM_Fatalities:15,SUM_Injuries:3585,SUM_PedFat:13,SUM_PedInj:914,SUM_BikeFat:0,SUM_BikeInj:222,SUM_MVOFat:2,SUM_MVOInj:2449,SUM_Non_Inj:10414,Date:"11/1/2009"},{FREQUENCY:8865,SUM_CRASHES:14399,SUM_Inj_Crashes:2690,SUM_Fatalities:14,SUM_Injuries:3596,SUM_PedFat:9,SUM_PedInj:1122,SUM_BikeFat:2,SUM_BikeInj:118,SUM_MVOFat:3,SUM_MVOInj:2356,SUM_Non_Inj:11709,Date:"12/1/2009"},{FREQUENCY:8035,SUM_CRASHES:12145,SUM_Inj_Crashes:2489,SUM_Fatalities:16,SUM_Injuries:3393,SUM_PedFat:12,SUM_PedInj:1003,SUM_BikeFat:2,SUM_BikeInj:125,SUM_MVOFat:2,SUM_MVOInj:2265,SUM_Non_Inj:9656,Date:"1/1/2010"},{FREQUENCY:8213,SUM_CRASHES:12262,SUM_Inj_Crashes:2162,SUM_Fatalities:6,SUM_Injuries:2919,SUM_PedFat:4,SUM_PedInj:899,SUM_BikeFat:0,SUM_BikeInj:115,SUM_MVOFat:2,SUM_MVOInj:1905,SUM_Non_Inj:10100,Date:"2/1/2010"},{FREQUENCY:8602,SUM_CRASHES:13516,SUM_Inj_Crashes:2655,SUM_Fatalities:9,SUM_Injuries:3587,SUM_PedFat:5,SUM_PedInj:1008,SUM_BikeFat:1,SUM_BikeInj:216,SUM_MVOFat:3,SUM_MVOInj:2363,SUM_Non_Inj:10861,Date:"3/1/2010"},{FREQUENCY:8638,SUM_CRASHES:13685,SUM_Inj_Crashes:2805,SUM_Fatalities:12,SUM_Injuries:3966,SUM_PedFat:8,SUM_PedInj:965,SUM_BikeFat:1,SUM_BikeInj:303,SUM_MVOFat:3,SUM_MVOInj:2698,SUM_Non_Inj:10880,Date:"4/1/2010"},{FREQUENCY:9142,SUM_CRASHES:14703,SUM_Inj_Crashes:2883,SUM_Fatalities:9,SUM_Injuries:4040,SUM_PedFat:4,SUM_PedInj:873,SUM_BikeFat:0,SUM_BikeInj:351,SUM_MVOFat:5,SUM_MVOInj:2816,SUM_Non_Inj:11820,Date:"5/1/2010"},{FREQUENCY:9208,SUM_CRASHES:15078,SUM_Inj_Crashes:3241,SUM_Fatalities:14,SUM_Injuries:4640,SUM_PedFat:2,SUM_PedInj:926,SUM_BikeFat:2,SUM_BikeInj:476,SUM_MVOFat:10,SUM_MVOInj:3238,SUM_Non_Inj:11837,Date:"6/1/2010"},{FREQUENCY:8822,SUM_CRASHES:14156,SUM_Inj_Crashes:3006,SUM_Fatalities:14,SUM_Injuries:4285,SUM_PedFat:6,SUM_PedInj:830,SUM_BikeFat:2,SUM_BikeInj:468,SUM_MVOFat:6,SUM_MVOInj:2987,SUM_Non_Inj:11150,Date:"7/1/2010"},{FREQUENCY:8449,SUM_CRASHES:13715,SUM_Inj_Crashes:2942,SUM_Fatalities:16,SUM_Injuries:4133,SUM_PedFat:6,SUM_PedInj:838,SUM_BikeFat:1,SUM_BikeInj:449,SUM_MVOFat:9,SUM_MVOInj:2846,SUM_Non_Inj:10773,Date:"8/1/2010"},{FREQUENCY:8769,SUM_CRASHES:14067,SUM_Inj_Crashes:3044,SUM_Fatalities:19,SUM_Injuries:4266,SUM_PedFat:13,SUM_PedInj:942,SUM_BikeFat:1,SUM_BikeInj:450,SUM_MVOFat:5,SUM_MVOInj:2874,SUM_Non_Inj:11023,Date:"9/1/2010"},{FREQUENCY:8913,SUM_CRASHES:14404,SUM_Inj_Crashes:3156,SUM_Fatalities:9,SUM_Injuries:4274,SUM_PedFat:6,SUM_PedInj:1150,SUM_BikeFat:2,SUM_BikeInj:362,SUM_MVOFat:1,SUM_MVOInj:2762,SUM_Non_Inj:11248,Date:"10/1/2010"},{FREQUENCY:8615,SUM_CRASHES:13754,SUM_Inj_Crashes:2911,SUM_Fatalities:9,SUM_Injuries:4001,SUM_PedFat:6,SUM_PedInj:1110,SUM_BikeFat:0,SUM_BikeInj:284,SUM_MVOFat:3,SUM_MVOInj:2607,SUM_Non_Inj:10843,Date:"11/1/2010"},{FREQUENCY:8911,SUM_CRASHES:14184,SUM_Inj_Crashes:2472,SUM_Fatalities:6,SUM_Injuries:3360,SUM_PedFat:5,SUM_PedInj:978,SUM_BikeFat:0,SUM_BikeInj:156,SUM_MVOFat:1,SUM_MVOInj:2226,SUM_Non_Inj:11712,Date:"12/1/2010"},{FREQUENCY:9006,SUM_CRASHES:13769,SUM_Inj_Crashes:2181,SUM_Fatalities:8,SUM_Injuries:2968,SUM_PedFat:4,SUM_PedInj:905,SUM_BikeFat:1,SUM_BikeInj:93,SUM_MVOFat:3,SUM_MVOInj:1970,SUM_Non_Inj:11588,Date:"1/1/2011"},{FREQUENCY:7703,SUM_CRASHES:11377,SUM_Inj_Crashes:1962,SUM_Fatalities:8,SUM_Injuries:2605,SUM_PedFat:6,SUM_PedInj:829,SUM_BikeFat:0,SUM_BikeInj:124,SUM_MVOFat:2,SUM_MVOInj:1652,SUM_Non_Inj:9415,Date:"2/1/2011"},{FREQUENCY:8236,SUM_CRASHES:12765,SUM_Inj_Crashes:2583,SUM_Fatalities:8,SUM_Injuries:3456,SUM_PedFat:5,SUM_PedInj:1029,SUM_BikeFat:1,SUM_BikeInj:202,SUM_MVOFat:2,SUM_MVOInj:2225,SUM_Non_Inj:10182,Date:"3/1/2011"},{FREQUENCY:7973,SUM_CRASHES:12230,SUM_Inj_Crashes:2301,SUM_Fatalities:11,SUM_Injuries:3226,SUM_PedFat:5,SUM_PedInj:803,SUM_BikeFat:1,SUM_BikeInj:242,SUM_MVOFat:5,SUM_MVOInj:2181,SUM_Non_Inj:9929,Date:"4/1/2011"},{FREQUENCY:8614,SUM_CRASHES:13859,SUM_Inj_Crashes:2976,SUM_Fatalities:9,SUM_Injuries:4147,SUM_PedFat:6,SUM_PedInj:1006,SUM_BikeFat:1,SUM_BikeInj:352,SUM_MVOFat:2,SUM_MVOInj:2789,SUM_Non_Inj:10883,Date:"5/1/2011"},{FREQUENCY:8731,SUM_CRASHES:14021,SUM_Inj_Crashes:2992,SUM_Fatalities:9,SUM_Injuries:4119,SUM_PedFat:7,SUM_PedInj:896,SUM_BikeFat:1,SUM_BikeInj:493,SUM_MVOFat:1,SUM_MVOInj:2730,SUM_Non_Inj:11029,Date:"6/1/2011"},{FREQUENCY:9130,SUM_CRASHES:14690,SUM_Inj_Crashes:3095,SUM_Fatalities:13,SUM_Injuries:4391,SUM_PedFat:5,SUM_PedInj:844,SUM_BikeFat:2,SUM_BikeInj:497,SUM_MVOFat:6,SUM_MVOInj:3050,SUM_Non_Inj:11595,Date:"7/1/2011"},{FREQUENCY:8685,SUM_CRASHES:13869,SUM_Inj_Crashes:2888,SUM_Fatalities:16,SUM_Injuries:3958,SUM_PedFat:4,SUM_PedInj:827,SUM_BikeFat:5,SUM_BikeInj:433,SUM_MVOFat:7,SUM_MVOInj:2698,SUM_Non_Inj:10981,Date:"8/1/2011"},{FREQUENCY:8783,SUM_CRASHES:14086,SUM_Inj_Crashes:2976,SUM_Fatalities:17,SUM_Injuries:4031,SUM_PedFat:8,SUM_PedInj:897,SUM_BikeFat:1,SUM_BikeInj:383,SUM_MVOFat:8,SUM_MVOInj:2751,SUM_Non_Inj:11110,Date:"9/1/2011"},{FREQUENCY:8629,SUM_CRASHES:14043,SUM_Inj_Crashes:3066,SUM_Fatalities:12,SUM_Injuries:4090,SUM_PedFat:8,SUM_PedInj:1157,SUM_BikeFat:1,SUM_BikeInj:309,SUM_MVOFat:3,SUM_MVOInj:2624,SUM_Non_Inj:10977,Date:"10/1/2011"},{FREQUENCY:7689,SUM_CRASHES:11793,SUM_Inj_Crashes:2646,SUM_Fatalities:10,SUM_Injuries:3612,SUM_PedFat:7,SUM_PedInj:1042,SUM_BikeFat:0,SUM_BikeInj:206,SUM_MVOFat:3,SUM_MVOInj:2364,SUM_Non_Inj:9147,Date:"11/1/2011"},{FREQUENCY:8470,SUM_CRASHES:13617,SUM_Inj_Crashes:2972,SUM_Fatalities:13,SUM_Injuries:4022,SUM_PedFat:9,SUM_PedInj:1203,SUM_BikeFat:1,SUM_BikeInj:182,SUM_MVOFat:3,SUM_MVOInj:2637,SUM_Non_Inj:10645,Date:"12/1/2011"},{FREQUENCY:8073,SUM_CRASHES:12372,SUM_Inj_Crashes:2623,SUM_Fatalities:10,SUM_Injuries:3561,SUM_PedFat:5,SUM_PedInj:1037,SUM_BikeFat:1,SUM_BikeInj:163,SUM_MVOFat:4,SUM_MVOInj:2361,SUM_Non_Inj:9749,Date:"1/1/2012"},{FREQUENCY:7545,SUM_CRASHES:11503,SUM_Inj_Crashes:2405,SUM_Fatalities:14,SUM_Injuries:3260,SUM_PedFat:10,SUM_PedInj:960,SUM_BikeFat:1,SUM_BikeInj:163,SUM_MVOFat:3,SUM_MVOInj:2137,SUM_Non_Inj:9098,Date:"2/1/2012"},{FREQUENCY:8428,SUM_CRASHES:13122,SUM_Inj_Crashes:2737,SUM_Fatalities:12,SUM_Injuries:3863,SUM_PedFat:7,SUM_PedInj:888,SUM_BikeFat:1,SUM_BikeInj:213,SUM_MVOFat:4,SUM_MVOInj:2762,SUM_Non_Inj:10385,Date:"3/1/2012"},{FREQUENCY:8407,SUM_CRASHES:13061,SUM_Inj_Crashes:2839,SUM_Fatalities:12,SUM_Injuries:3942,SUM_PedFat:5,SUM_PedInj:918,SUM_BikeFat:5,SUM_BikeInj:286,SUM_MVOFat:2,SUM_MVOInj:2738,SUM_Non_Inj:10222,Date:"4/1/2012"},{FREQUENCY:8933,SUM_CRASHES:14268,SUM_Inj_Crashes:3026,SUM_Fatalities:20,SUM_Injuries:4091,SUM_PedFat:9,SUM_PedInj:901,SUM_BikeFat:1,SUM_BikeInj:348,SUM_MVOFat:10,SUM_MVOInj:2842,SUM_Non_Inj:11242,Date:"5/1/2012"},{FREQUENCY:8898,SUM_CRASHES:14452,SUM_Inj_Crashes:2982,SUM_Fatalities:15,SUM_Injuries:4099,SUM_PedFat:5,SUM_PedInj:925,SUM_BikeFat:2,SUM_BikeInj:348,SUM_MVOFat:8,SUM_MVOInj:2826,SUM_Non_Inj:11470,Date:"6/1/2012"},{FREQUENCY:8475,SUM_CRASHES:13484,SUM_Inj_Crashes:2929,SUM_Fatalities:19,SUM_Injuries:4037,SUM_PedFat:3,SUM_PedInj:826,SUM_BikeFat:2,SUM_BikeInj:415,SUM_MVOFat:14,SUM_MVOInj:2796,SUM_Non_Inj:10555,Date:"7/1/2012"},{FREQUENCY:8654,SUM_CRASHES:13614,SUM_Inj_Crashes:2946,SUM_Fatalities:14,SUM_Injuries:3942,SUM_PedFat:7,SUM_PedInj:825,SUM_BikeFat:0,SUM_BikeInj:471,SUM_MVOFat:7,SUM_MVOInj:2646,SUM_Non_Inj:10668,Date:"8/1/2012"},{FREQUENCY:8378,SUM_CRASHES:13104,SUM_Inj_Crashes:2874,SUM_Fatalities:12,SUM_Injuries:3924,SUM_PedFat:7,SUM_PedInj:868,SUM_BikeFat:1,SUM_BikeInj:394,SUM_MVOFat:4,SUM_MVOInj:2662,SUM_Non_Inj:10230,Date:"9/1/2012"},{FREQUENCY:8461,SUM_CRASHES:13477,SUM_Inj_Crashes:2821,SUM_Fatalities:13,SUM_Injuries:3803,SUM_PedFat:4,SUM_PedInj:936,SUM_BikeFat:1,SUM_BikeInj:302,SUM_MVOFat:8,SUM_MVOInj:2565,SUM_Non_Inj:10656,Date:"10/1/2012"},{FREQUENCY:8092,SUM_CRASHES:12719,SUM_Inj_Crashes:2569,SUM_Fatalities:12,SUM_Injuries:3407,SUM_PedFat:7,SUM_PedInj:998,SUM_BikeFat:0,SUM_BikeInj:264,SUM_MVOFat:5,SUM_MVOInj:2145,SUM_Non_Inj:10150,Date:"11/1/2012"},{FREQUENCY:8564,SUM_CRASHES:13635,SUM_Inj_Crashes:2972,SUM_Fatalities:18,SUM_Injuries:3913,SUM_PedFat:10,SUM_PedInj:1250,SUM_BikeFat:0,SUM_BikeInj:200,SUM_MVOFat:8,SUM_MVOInj:2463,SUM_Non_Inj:10663,Date:"12/1/2012"},{FREQUENCY:8223,SUM_CRASHES:12541,SUM_Inj_Crashes:2614,SUM_Fatalities:22,SUM_Injuries:3427,SUM_PedFat:13,SUM_PedInj:1072,SUM_BikeFat:1,SUM_BikeInj:170,SUM_MVOFat:8,SUM_MVOInj:2185,SUM_Non_Inj:9927,Date:"1/1/2013"},{FREQUENCY:7847,SUM_CRASHES:11631,SUM_Inj_Crashes:2280,SUM_Fatalities:11,SUM_Injuries:3012,SUM_PedFat:7,SUM_PedInj:965,SUM_BikeFat:0,SUM_BikeInj:121,SUM_MVOFat:4,SUM_MVOInj:1926,SUM_Non_Inj:9351,Date:"2/1/2013"},{FREQUENCY:8520,SUM_CRASHES:13247,SUM_Inj_Crashes:2585,SUM_Fatalities:15,SUM_Injuries:3564,SUM_PedFat:7,SUM_PedInj:980,SUM_BikeFat:1,SUM_BikeInj:169,SUM_MVOFat:7,SUM_MVOInj:2415,SUM_Non_Inj:10662,Date:"3/1/2013"},{FREQUENCY:8404,SUM_CRASHES:13181,SUM_Inj_Crashes:2769,SUM_Fatalities:7,SUM_Injuries:3769,SUM_PedFat:4,SUM_PedInj:903,SUM_BikeFat:0,SUM_BikeInj:266,SUM_MVOFat:3,SUM_MVOInj:2600,SUM_Non_Inj:10412,Date:"4/1/2013"},{FREQUENCY:9195,SUM_CRASHES:14875,SUM_Inj_Crashes:3108,SUM_Fatalities:9,SUM_Injuries:4204,SUM_PedFat:3,SUM_PedInj:973,SUM_BikeFat:2,SUM_BikeInj:368,SUM_MVOFat:4,SUM_MVOInj:2863,SUM_Non_Inj:11767,Date:"5/1/2013"},{FREQUENCY:9099,SUM_CRASHES:14429,SUM_Inj_Crashes:3107,SUM_Fatalities:12,SUM_Injuries:4244,SUM_PedFat:6,SUM_PedInj:946,SUM_BikeFat:2,SUM_BikeInj:461,SUM_MVOFat:4,SUM_MVOInj:2837,SUM_Non_Inj:11322,Date:"6/1/2013"},{FREQUENCY:8782,SUM_CRASHES:14045,SUM_Inj_Crashes:3089,SUM_Fatalities:19,SUM_Injuries:4342,SUM_PedFat:10,SUM_PedInj:840,SUM_BikeFat:0,SUM_BikeInj:428,SUM_MVOFat:9,SUM_MVOInj:3074,SUM_Non_Inj:10956,Date:"7/1/2013"},{FREQUENCY:8387,SUM_CRASHES:13353,SUM_Inj_Crashes:3003,SUM_Fatalities:23,SUM_Injuries:4043,SUM_PedFat:13,SUM_PedInj:857,SUM_BikeFat:1,SUM_BikeInj:461,SUM_MVOFat:9,SUM_MVOInj:2725,SUM_Non_Inj:10350,Date:"8/1/2013"},{FREQUENCY:8559,SUM_CRASHES:13519,SUM_Inj_Crashes:3079,SUM_Fatalities:13,SUM_Injuries:4214,SUM_PedFat:7,SUM_PedInj:1e3,SUM_BikeFat:0,SUM_BikeInj:430,SUM_MVOFat:6,SUM_MVOInj:2784,SUM_Non_Inj:10440,Date:"9/1/2013"},{FREQUENCY:8803,SUM_CRASHES:14136,SUM_Inj_Crashes:3043,SUM_Fatalities:16,SUM_Injuries:4053,SUM_PedFat:10,SUM_PedInj:1040,SUM_BikeFat:1,SUM_BikeInj:400,SUM_MVOFat:5,SUM_MVOInj:2613,SUM_Non_Inj:11093,Date:"10/1/2013"},{FREQUENCY:8762,SUM_CRASHES:14186,SUM_Inj_Crashes:2905,SUM_Fatalities:24,SUM_Injuries:3878,SUM_PedFat:17,SUM_PedInj:1084,SUM_BikeFat:2,SUM_BikeInj:250,SUM_MVOFat:5,SUM_MVOInj:2544,SUM_Non_Inj:11281,Date:"11/1/2013"},{FREQUENCY:8889,SUM_CRASHES:14046,SUM_Inj_Crashes:2775,SUM_Fatalities:18,SUM_Injuries:3652,SUM_PedFat:11,SUM_PedInj:1173,SUM_BikeFat:0,SUM_BikeInj:148,SUM_MVOFat:7,SUM_MVOInj:2331,SUM_Non_Inj:11271,Date:"12/1/2013"},{FREQUENCY:8619,SUM_CRASHES:13319,SUM_Inj_Crashes:2489,SUM_Fatalities:16,SUM_Injuries:3289,SUM_PedFat:9,SUM_PedInj:1049,SUM_BikeFat:1,SUM_BikeInj:103,SUM_MVOFat:6,SUM_MVOInj:2137,SUM_Non_Inj:10830,Date:"1/1/2014"},{FREQUENCY:8586,SUM_CRASHES:12756,SUM_Inj_Crashes:1963,SUM_Fatalities:8,SUM_Injuries:2583,SUM_PedFat:7,SUM_PedInj:801,SUM_BikeFat:0,SUM_BikeInj:82,SUM_MVOFat:1,SUM_MVOInj:1700,SUM_Non_Inj:10793,Date:"2/1/2014"},{FREQUENCY:8243,SUM_CRASHES:12750,SUM_Inj_Crashes:2368,SUM_Fatalities:10,SUM_Injuries:3218,SUM_PedFat:7,SUM_PedInj:905,SUM_BikeFat:0,SUM_BikeInj:160,SUM_MVOFat:3,SUM_MVOInj:2153,SUM_Non_Inj:10382,Date:"3/1/2014"},{FREQUENCY:8300,SUM_CRASHES:13037,SUM_Inj_Crashes:2511,SUM_Fatalities:13,SUM_Injuries:3349,SUM_PedFat:5,SUM_PedInj:840,SUM_BikeFat:1,SUM_BikeInj:279,SUM_MVOFat:7,SUM_MVOInj:2230,SUM_Non_Inj:10526,Date:"4/1/2014"},{FREQUENCY:8898,SUM_CRASHES:14421,SUM_Inj_Crashes:2786,SUM_Fatalities:15,SUM_Injuries:3813,SUM_PedFat:6,SUM_PedInj:880,SUM_BikeFat:2,SUM_BikeInj:346,SUM_MVOFat:7,SUM_MVOInj:2587,SUM_Non_Inj:11635,Date:"5/1/2014"},{FREQUENCY:3747,SUM_CRASHES:4497,SUM_Inj_Crashes:895,SUM_Fatalities:8,SUM_Injuries:1274,SUM_PedFat:4,SUM_PedInj:270,SUM_BikeFat:2,SUM_BikeInj:106,SUM_MVOFat:2,SUM_MVOInj:898,SUM_Non_Inj:3602,Date:"6/1/2014"}],stats2=[{FREQUENCY:27500,SUM_CRASHES:161695,SUM_Inj_Crashes:32016,SUM_Fat_Crashes:144,SUM_Fatalities:152,SUM_Injuries:44552,SUM_PedFat:85,SUM_PedInj:11079,SUM_BikeFat:11,SUM_BikeInj:3001,SUM_MVOFat:56,SUM_MVOInj:30472,SUM_nonInj:129679,Date:"1/1/2009"},{FREQUENCY:27695,SUM_CRASHES:165669,SUM_Inj_Crashes:33766,SUM_Fat_Crashes:134,SUM_Fatalities:139,SUM_Injuries:46864,SUM_PedFat:77,SUM_PedInj:11522,SUM_BikeFat:12,SUM_BikeInj:3755,SUM_MVOFat:50,SUM_MVOInj:31587,SUM_nonInj:131903,Date:"1/1/2010"},{FREQUENCY:27754,SUM_CRASHES:160119,SUM_Inj_Crashes:32638,SUM_Fat_Crashes:131,SUM_Fatalities:134,SUM_Injuries:44625,SUM_PedFat:74,SUM_PedInj:11438,SUM_BikeFat:15,SUM_BikeInj:3516,SUM_MVOFat:45,SUM_MVOInj:29671,SUM_nonInj:127481,Date:"1/1/2011"},{FREQUENCY:27369,SUM_CRASHES:158811,SUM_Inj_Crashes:33723,SUM_Fat_Crashes:163,SUM_Fatalities:171,SUM_Injuries:45842,SUM_PedFat:79,SUM_PedInj:11332,SUM_BikeFat:15,SUM_BikeInj:3567,SUM_MVOFat:77,SUM_MVOInj:30943,SUM_nonInj:125088,Date:"1/1/2012"},{FREQUENCY:27905,SUM_CRASHES:163189,SUM_Inj_Crashes:34357,SUM_Fat_Crashes:178,SUM_Fatalities:189,SUM_Injuries:46402,SUM_PedFat:108,SUM_PedInj:11833,SUM_BikeFat:10,SUM_BikeInj:3672,SUM_MVOFat:71,SUM_MVOInj:30897,SUM_nonInj:128832,Date:"1/1/2013"},{FREQUENCY:20985,SUM_CRASHES:66283,SUM_Inj_Crashes:12117,SUM_Fat_Crashes:59,SUM_Fatalities:62,SUM_Injuries:16252,SUM_PedFat:34,SUM_PedInj:4475,SUM_BikeFat:4,SUM_BikeInj:970,SUM_MVOFat:24,SUM_MVOInj:10807,SUM_nonInj:54166,Date:"1/1/2014"}];$("#jqxslider").bind("change",function(){checkStats()}),$("#jqxslider2").bind("change",function(){checkStats()}),$(".btn-toggle").click(function(){$(this).find(".btn").toggleClass("active"),$(this).find(".btn-primary").size()>0&&$(this).find(".btn").toggleClass("btn-primary"),$(this).find(".btn-danger").size()>0&&$(this).find(".btn").toggleClass("btn-danger"),$(this).find(".btn-success").size()>0&&$(this).find(".btn").toggleClass("btn-success"),$(this).find(".btn-info").size()>0&&$(this).find(".btn").toggleClass("btn-info"),$(this).find(".btn").toggleClass("btn-default")
}),$(".dropdown-menu li a").on("touchstart click",function(){var a=$(this).text();$(this).parents(".input-group").find(".dropdown-toggle").html(a+' <span class="caret"></span>')});var dummy=document.getElementById("dummy");dummy.innerHTML="<!--[if lte IE 8]>x<![endif]-->";var isIE9="x"===dummy.innerHTML;1==isIE9&&alert("This website is designed for IE9 or higher.  Please update IE, or open the website using Chrome, Firefox, or another modern browser."),$("[data-toggle=dropdown]").each(function(){this.addEventListener("click",function(){},!1)}),$(document).ready(function(){function a(){$("#site-wrapper").hasClass("show-nav")?$("#site-wrapper").removeClass("show-nav"):$("#site-wrapper").addClass("show-nav")}$(function(){$(".toggle-nav").click(function(){a(),console.log("toggle nav")})})});